const isc_fields=document.querySelectorAll(".isc-table-storage input, .isc-table-storage select, .isc-table-storage button");isc_fields.forEach(function(el,i){["click"].forEach(function(e){el.addEventListener(e,event=>{var image_key=el.dataset.imgKey;var request=new XMLHttpRequest;const spinner=el.closest("td").querySelector(".spinner");spinner.style.visibility="visible";el.style.display="none";request.open("POST",ajaxurl,true);request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");request.onload=function(){if(this.status>=200&&this.status<400){spinner.style.visibility="hidden";if(request.responseText){el.insertAdjacentHTML("afterend",request.responseText)}}else{}};request.onerror=function(){};request.send("action=isc-update-storage-image&nonce="+isc.ajaxNonce+"&image_key="+image_key+"&field="+el.name)})})});